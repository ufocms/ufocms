!function(t,i){var e,o={title:"Popup Window",modal:!0,autoOpen:!0,animationTime:300,customClass:"",buttons:{close:!0,maximize:!0,collapse:!0,minimize:!0},buttonsPosition:"right",buttonsTexts:{close:"Close",maximize:"Maximize",unmaximize:"Restore",minimize:"Minimize",unminimize:"Show",collapse:"Collapse",uncollapse:"Expand"},draggable:!0,nativeDrag:!0,dragOpacity:.6,resizable:!0,resizeOpacity:.6,statusBar:!0,top:"auto",left:"auto",height:200,width:400,maxHeight:i,maxWidth:i,minHeight:100,minWidth:200,collapsedWidth:i,keepInViewport:!0,mouseMoveEvents:!0},n={"box-sizing":"border-box",position:"fixed",top:"0",bottom:"0",right:"0",left:"0",display:"flex","justify-content":"flex-start","align-content":"flex-start","pointer-events":"none"},a={"box-sizing":"border-box",position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},s={"box-sizing":"border-box",background:"transparent",border:"none"},p={"box-sizing":"border-box",display:"flex","flex-flow":"column nowrap",position:"absolute",padding:"0","pointer-events":"auto"},d={"box-sizing":"border-box",flex:"0 0 auto",display:"flex","align-items":"center"},r={"box-sizing":"border-box",flex:"1 1 auto",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},l={"box-sizing":"border-box",flex:"0 0 auto",display:"flex"},w={flex:"1 1 auto",overflow:"auto"},h={"box-sizing":"border-box",flex:"0 0 auto",display:"flex","align-items":"flex-end"},u={"box-sizing":"border-box",flex:"1 1 auto",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","white-space":"nowrap"},c={"box-sizing":"border-box",display:"flex"},m={cursor:"se-resize"},g={position:"absolute",left:"0",right:"0",cursor:"n-resize"},f={position:"absolute",left:"0",right:"0",cursor:"s-resize"},b={position:"absolute",top:"0",bottom:"0",cursor:"e-resize"},x={position:"absolute",top:"0",bottom:"0",cursor:"w-resize"},v={position:"absolute",cursor:"nw-resize"},_={position:"absolute",cursor:"ne-resize"},z={position:"absolute",cursor:"ne-resize"},y={position:"absolute",cursor:"nw-resize"},T='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g fill="none"><polyline points="1,7 9,7 5,2 1,7 9,7"/></g></svg>',k='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g fill="none"><polyline points="1,3 9,3 5,8 1,3 9,3"/></g></svg>',W='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g fill="none"><rect x="1" y="1" height="8" width="8"/></g></svg>',X='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g fill="none"><rect x="1" y="3" height="6" width="6"/><line y1="3" x1="3" y2="1" x2="3"/><line y1="1" x1="2.5" y2="1" x2="9.5"/><line y1="1" x1="9" y2="7" x2="9"/><line y1="7" x1="9.5" y2="7" x2="7"/></g></svg>',Y=3,P={position:"bottom left",direction:"horizontal"};function I(n,k){if(n.closest(".popupwindow").length)it("jQuery PopupWindow is already initialized on this element");else{var X=t.extend(!0,{},o,k);X.animationTime=parseInt(X.animationTime,10),X.height=parseInt(X.height,10),X.width=parseInt(X.width,10),X.maxHeight=parseInt(X.maxHeight,10)||0,X.maxWidth=parseInt(X.maxWidth,10)||0,X.minHeight=parseInt(X.minHeight,10)||0,X.minWidth=parseInt(X.minWidth,10)||0;var Y=t("<div>",{class:"popupwindow_overlay"}).css(a).appendTo(e);X.modal&&Y.css("pointer-events","auto");var P=t("<div>",{class:"popupwindow_minplaceholder"}).css(s).hide().appendTo(e),I={left:"auto"==X.left?(Y.width()-X.width)/2:parseInt(X.left,10),top:"auto"==X.top?(Y.height()-X.height)/2:parseInt(X.top,10)},H=t("<div>",{class:"popupwindow",css:{height:X.height,left:I.left,top:I.top,width:X.width}}).css(p).addClass(X.customClass).data({originalTarget:n,originalParent:n.parent(),overlay:Y,minPlaceholder:P,settings:X,opened:!1,collapsed:!1,minimized:!1,maximized:!1,currentPosition:I,currentSize:{height:X.height,width:X.width},savedPosition:i,savedSize:i}).appendTo(Y);X.draggable&&(X.nativeDrag?H.on("dragstart",lt).on("drag",lt).on("dragend",lt).on("mousedown",".popupwindow_titlebar_draggable",wt):H.on("mousedown",".popupwindow_titlebar_draggable",st));var O=X.buttonsPosition.toLowerCase().indexOf("l")<0,S=t("<div>",{class:"popupwindow_titlebar"}).css(d).appendTo(H);X.draggable&&S.addClass("popupwindow_titlebar_draggable"),t("<div>",{class:"popupwindow_titlebar_text",text:X.title}).css(r).css("order",O?1:5).appendTo(S),X.buttons.close&&t("<div>",{class:"popupwindow_titlebar_button popupwindow_titlebar_button_close"}).css(l).css("order",O?5:1).attr("title",X.buttonsTexts.close).on("click",et).append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g><line y2="0" x2="10" y1="10" x1="0"/><line y2="10" x2="10" y1="0" x1="0"/></g></svg>').appendTo(S),X.buttons.maximize&&t("<div>",{class:"popupwindow_titlebar_button popupwindow_titlebar_button_maximize"}).css(l).css("order",O?4:2).attr("title",X.buttonsTexts.maximize).on("click",ot).append(W).appendTo(S),X.buttons.collapse&&t("<div>",{class:"popupwindow_titlebar_button popupwindow_titlebar_button_collapse"}).css(l).css("order",3).attr("title",X.buttonsTexts.collapse).on("click",nt).append(T).appendTo(S),X.buttons.minimize&&t("<div>",{class:"popupwindow_titlebar_button popupwindow_titlebar_button_minimize"}).css(l).css("order",O?2:4).attr("title",X.buttonsTexts.minimize).on("click",at).append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g><line y1="6" x1="8" y2="6" x2="2"/></g></svg>').appendTo(S);var E=t("<div>",{class:"popupwindow_content"}).css(w).appendTo(H);if(n.show().appendTo(E),X.statusBar){var D=t("<div>",{class:"popupwindow_statusbar"}).css(h).appendTo(H);t("<div>",{class:"popupwindow_statusbar_content"}).css(u).appendTo(D);var B=t("<div>",{class:"popupwindow_statusbar_handle"}).css(c).appendTo(D);X.resizable&&B.css(m).append('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%"><g><line y2="0" x2="10" y1="10" x1="0"/><line y2="2" x2="12" y1="12" x1="2"/><line y2="4" x2="14" y1="14" x1="4"/></g></svg>').on("mousedown",null,{dimension:"both",directionX:"right",directionY:"bottom"},pt)}if(X.resizable){var M=N(H);t("<div>",{class:"popupwindow_resizer popupwindow_resizer_top",css:{top:0-M.top-2,height:M.top+4}}).css(g).on("mousedown",null,{dimension:"height",directionY:"top"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_bottom",css:{bottom:0-M.bottom-2,height:M.bottom+4}}).css(f).on("mousedown",null,{dimension:"height",directionY:"bottom"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_left",css:{left:0-M.left-2,width:M.left+4}}).css(b).on("mousedown",null,{dimension:"width",directionX:"left"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_right",css:{right:0-M.right-2,width:M.right+4}}).css(x).on("mousedown",null,{dimension:"width",directionX:"right"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_topleft",css:{top:0-M.top-2,left:0-M.left-2,width:M.left+4,height:M.top+4}}).css(v).on("mousedown",null,{dimension:"both",directionX:"left",directionY:"top"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_topright",css:{top:0-M.top-2,right:0-M.right-2,width:M.right+4,height:M.top+4}}).css(_).on("mousedown",null,{dimension:"both",directionX:"right",directionY:"top"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_bottomleft",css:{bottom:0-M.bottom-2,left:0-M.left-2,width:M.left+4,height:M.bottom+4}}).css(z).on("mousedown",null,{dimension:"both",directionX:"left",directionY:"bottom"},pt).appendTo(H),t("<div>",{class:"popupwindow_resizer popupwindow_resizer_bottomright",css:{bottom:0-M.bottom-2,right:0-M.right-2,width:M.right+4,height:M.bottom+4}}).css(y).on("mousedown",null,{dimension:"both",directionX:"right",directionY:"bottom"},pt).appendTo(H)}X.modal||Y.width(0).height(0),Y.hide(),X.autoOpen&&C(H)}}function C(t){tt(t)&&!t.data("opened")&&(t.data("overlay").show(),t.data("opened",!0),Z(t,"open"),D(t),M(t))}function H(t){tt(t)&&t.data("opened")&&(t.data("minimized")&&M(t),t.data("overlay").hide(),t.data("opened",!1),Z(t,"close"))}function O(i){if(tt(i)&&i.data("opened")&&!i.data("maximized")&&!i.data("collapsed")&&!i.data("minimized")){var e=i.data("settings");i.find(".popupwindow_titlebar_button_maximize").empty().append(X).attr("title",e.buttonsTexts.unmaximize),i.find(".popupwindow_statusbar_handle *, .popupwindow_resizer, .popupwindow_titlebar_button_collapse").hide(),e.draggable&&i.find(".popupwindow_titlebar").removeClass("popupwindow_titlebar_draggable"),e.modal||i.data("overlay").css("background-color","transparent").width("100%").height("100%"),V(i),G(i);var o=A(i,{top:0,left:0}),n=K(i,{width:"100%",height:"100%"});return t.when(o,n).then((function(){i.data("maximized",!0),Z(i,"maximize")}))}}function S(i){if(tt(i)&&i.data("opened")&&i.data("maximized")){var e=i.data("settings"),o=q(i),n=J(i);return i.find(".popupwindow_titlebar_button_maximize").empty().append(W).attr("title",e.buttonsTexts.maximize),i.find(".popupwindow_statusbar_handle *, .popupwindow_resizer, .popupwindow_titlebar_button_collapse").show(),e.draggable&&i.find(".popupwindow_titlebar").addClass("popupwindow_titlebar_draggable"),e.modal||i.data("overlay").width(0).height(0).css("background-color",""),t.when(o,n).then((function(){i.data("maximized",!1),Z(i,"unmaximize")}))}}function E(i){if(tt(i)&&i.data("opened")&&!i.data("maximized")&&!i.data("collapsed")&&!i.data("minimized")){var e=i.data("settings");i.find(".popupwindow_titlebar_button_collapse").empty().append(k).attr("title",e.buttonsTexts.uncollapse),i.find(".popupwindow_content, .popupwindow_statusbar, .popupwindow_resizer, .popupwindow_titlebar_button_maximize, .popupwindow_titlebar_button_minimize").hide(),G(i);var o=K(i,{width:e.collapsedWidth,height:N(i,"top")+N(i,"bottom")+i.find(".popupwindow_titlebar").outerHeight()});return t.when(o).then((function(){i.data("collapsed",!0),Z(i,"collapse")}))}}function D(i){if(tt(i)&&i.data("opened")&&i.data("collapsed")){var e=i.data("settings"),o=J(i);return i.find(".popupwindow_titlebar_button_collapse").empty().append(T).attr("title",e.buttonsTexts.collapse),i.find(".popupwindow_content, .popupwindow_statusbar, .popupwindow_resizer, .popupwindow_titlebar_button_maximize, .popupwindow_titlebar_button_minimize").show(),t.when(o).then((function(){i.data("collapsed",!1),Z(i,"uncollapse")}))}}function B(i){if(tt(i)&&i.data("opened")&&!i.data("collapsed")&&!i.data("minimized")){var e,o=t.Deferred(),n=i.data("settings");if(i.data("maximized")){var a=n.animationTime;n.animationTime=n.animationTime/Y,e=S(i),n.animationTime=a}else V(i),G(i),e=t.Deferred().resolve();return t.when(e).then((function(){i.addClass("popupwindow_minimized").width(""),i.find(".popupwindow_titlebar_button_minimize").attr("title",n.buttonsTexts.unminimize),i.find(".popupwindow_content, .popupwindow_statusbar, .popupwindow_resizer, .popupwindow_titlebar_button_maximize, .popupwindow_titlebar_button_collapse").hide(),n.draggable&&i.find(".popupwindow_titlebar").removeClass("popupwindow_titlebar_draggable");var e=i.data("minPlaceholder"),a={width:i.outerWidth(),height:N(i,"top")+N(i,"bottom")+i.find(".popupwindow_titlebar").outerHeight()};e.outerWidth(a.width).outerHeight(a.height).show();var s={},p=e.position();"horizontal"==P.direction?(s.width=a.width,e.width(0)):(s.height=a.height,e.height(0));var d=A(i,p),r=K(i,{height:a.height});e.animate(s,{duration:n.animationTime,queue:!1,complete:function(){t(this).hide(),i.css({position:"relative",top:"",left:""}).insertAfter(i.data("overlay"))}}),t.when(d,r).then((function(){i.data("minimized",!0),Z(i,"minimize"),o.resolve()}))})),o.promise()}}function M(i){if(tt(i)&&i.data("opened")&&i.data("minimized")){var e=i.data("settings"),o=i.data("minPlaceholder");i.removeClass("popupwindow_minimized"),i.find(".popupwindow_titlebar_button_minimize").attr("title",e.buttonsTexts.minimize),i.find(".popupwindow_content, .popupwindow_statusbar, .popupwindow_resizer, .popupwindow_titlebar_button_maximize, .popupwindow_titlebar_button_collapse").show(),e.draggable&&i.find(".popupwindow_titlebar").addClass("popupwindow_titlebar_draggable"),o.show().insertAfter(i.data("overlay"));var n={width:o.outerWidth(),height:o.outerHeight()},a={},s=o.position();"horizontal"==P.direction?(a.width=0,o.width(n.width)):(a.height=0,o.height(n.height)),i.css({position:"absolute",top:s.top,left:s.left,width:n.width}).appendTo(i.data("overlay"));var p=q(i),d=J(i);return o.animate(a,{duration:e.animationTime,queue:!1,complete:function(){t(this).hide()}}),t.when(p,d).then((function(){i.data("minimized",!1),Z(i,"unminimize")}))}}function j(e){return tt(e)?t.extend({},e.data("currentPosition")):i}function L(i,e){t.extend(i.data("currentPosition"),e)}function V(t){t.data("savedPosition",j(t))}function q(t){return A(t,t.data("savedPosition"))}function A(e,o){if(tt(e)){var n=t.Deferred(),a=e.data("settings"),s=o.animationTime!==i?parseInt(o.animationTime):a.animationTime,p={top:o.top,left:o.left};if(o.check){if(!e.data("opened")||e.data("maximized")||e.data("minimized"))return;if(a.keepInViewport){var d=R(e),r=t(window);p.top>r.height()-d.height&&(p.top=r.height()-d.height),p.left>r.width()-d.width&&(p.left=r.width()-d.width),p.top<0&&(p.top=0),p.left<0&&(p.left=0)}}var l=j(e);return l.top!=p.top||l.left!=p.left?e.animate(p,{duration:s,queue:!1,complete:function(){L(e,p),o.event&&Z(e,"move"),n.resolve()}}):n.resolve(),n.promise()}}function Q(i){A(i,t.extend({animationTime:i.data("settings").animationTime/Y,check:!0,event:!0},j(i)))}function R(e){return tt(e)?t.extend({},e.data("currentSize")):i}function F(i,e){t.extend(i.data("currentSize"),e)}function G(t){t.data("savedSize",R(t))}function J(i){return K(i,t.extend({checkPosition:!0,checkSize:!1,event:!1},i.data("savedSize")))}function K(e,o){if(tt(e)){var n=t.Deferred(),a=e.data("settings"),s=o.animationTime!==i?parseInt(o.animationTime):a.animationTime,p={width:o.width,height:o.height};if(o.checkSize){if(!e.data("opened")||e.data("maximized")||e.data("minimized"))return;a.maxWidth&&p.width>a.maxWidth&&(p.width=a.maxWidth),a.minWidth&&p.width<a.minWidth&&(p.width=a.minWidth),a.maxHeight&&p.height>a.maxHeight&&(p.height=a.maxHeight),a.minHeight&&p.height<a.minHeight&&(p.height=a.minHeight),e.data("collapsed")&&(e.data("savedSize",t.extend({},p)),delete p.height)}var d=R(e);return d.width!=p.width||d.height!=p.height?e.animate(p,{duration:s,queue:!1,complete:function(){F(e,p),o.event&&Z(e,"resize"),o.checkPosition&&Q(e),n.resolve()}}):n.resolve(),n.promise()}}function N(t,e){return e!==i?parseInt(t.css("border-"+e+"-width"),10):{top:parseInt(t.css("border-top-width"),10),bottom:parseInt(t.css("border-bottom-width"),10),left:parseInt(t.css("border-left-width"),10),right:parseInt(t.css("border-right-width"),10)}}function U(i){i.popupWindow.fadeTo(0,i.opacity),i.popupWindow.data("settings").mouseMoveEvents||i.popupWindow.data("tempSavedData",{position:j(i.popupWindow),size:R(i.popupWindow)}),t(document).on("mousemove",i,dt).on("mouseup",i,rt)}function Z(t,i){var e;"move"==i&&(e=j(t)),"resize"==i&&(e=R(t)),t.data("originalTarget").trigger(i+".popupwindow",e)}function $(){var t={};"horizontal"==P.direction?(t["flex-direction"]=0<=P.position.indexOf("left")?"row":"row-reverse",t["flex-wrap"]=0<=P.position.indexOf("top")?"wrap":"wrap-reverse"):(t["flex-direction"]=0<=P.position.indexOf("top")?"column":"column-reverse",t["flex-wrap"]=0<=P.position.indexOf("left")?"wrap":"wrap-reverse"),e.css(t)}function tt(t){return!!t.length||(it("jQuery PopupWindow is not initialized on this element"),!1)}function it(t){t="jQuery PopupWindow Warning: "+t,window.console.warn?console.warn(t):window.console.log&&console.log(t)}function et(i){H(t(i.currentTarget).closest(".popupwindow"))}function ot(i){var e=t(i.currentTarget).closest(".popupwindow");e.data("maximized")?S(e):O(e)}function nt(i){var e=t(i.currentTarget).closest(".popupwindow");e.data("collapsed")?D(e):E(e)}function at(i){var e=t(i.currentTarget).closest(".popupwindow");e.data("minimized")?M(e):B(e)}function st(i){if(i.target!==i.currentTarget&&!t(i.target).hasClass("popupwindow_titlebar_text"))return!1;var e=t(i.currentTarget).closest(".popupwindow"),o=j(e),n=e.data("settings");n.modal||e.data("overlay").css("background-color","transparent").width("100%").height("100%"),U({popupWindow:e,action:"drag",opacity:n.dragOpacity,compensationX:i.pageX-o.left,compensationY:i.pageY-o.top}),i.preventDefault()}function pt(i){var e=t(i.currentTarget).closest(".popupwindow"),o=j(e),n=R(e);U({popupWindow:e,action:"resize",dimension:i.data.dimension,directionX:i.data.directionX,directionY:i.data.directionY,opacity:e.data("settings").resizeOpacity,startX:i.pageX+("left"==i.data.directionX?n.width:-n.width),startY:i.pageY+("top"==i.data.directionY?n.height:-n.height),compensationX:i.pageX-o.left,compensationY:i.pageY-o.top}),i.preventDefault()}function dt(e){var o=e.data.popupWindow,n=o.data("settings"),a=j(o),s=R(o),p={},d={};switch(e.data.action){case"drag":if(p.top=e.pageY-e.data.compensationY,p.left=e.pageX-e.data.compensationX,n.keepInViewport){var r=R(o),l=t(window);p.top<0&&(p.top=0),p.left<0&&(p.left=0),p.top>l.height()-r.height&&(p.top=l.height()-r.height),p.left>l.width()-r.width&&(p.left=l.width()-r.width)}break;case"resize":if("height"!=e.data.dimension&&0<e.pageX){var w="left"==e.data.directionX?e.data.startX-e.pageX:e.pageX-e.data.startX;w>=n.minWidth&&(!n.maxWidth||w<=n.maxWidth)&&(d.width=w,"left"==e.data.directionX&&(p.left=e.pageX-e.data.compensationX))}if("width"!=e.data.dimension&&0<e.pageY){var h="top"==e.data.directionY?e.data.startY-e.pageY:e.pageY-e.data.startY;h>=n.minHeight&&(!n.maxHeight||h<=n.maxHeight)&&(d.height=h,"top"==e.data.directionY&&(p.top=e.pageY-e.data.compensationY))}}(p.top!==i&&p.top!=a.top||p.left!==i&&p.left!=a.left)&&(o.css(p),L(o,p),n.mouseMoveEvents&&Z(o,"move")),(d.width!==i&&d.width!=s.width||d.height!==i&&d.height!=s.height)&&(o.outerWidth(d.width).outerHeight(d.height),F(o,d),n.mouseMoveEvents&&Z(o,"resize"))}function rt(i){var e=i.data.popupWindow,o=e.data("settings");if(e.fadeTo(0,1),t(document).off("mousemove",dt).off("mouseup",rt),o.modal||e.data("overlay").width(0).height(0).css("background-color",""),!o.mouseMoveEvents){var n=j(e),a=R(e),s=e.data("tempSavedData");s.position.top==n.top&&s.position.left==n.left||Z(e,"move"),s.size.width==a.width&&s.size.height==a.height||Z(e,"resize"),e.removeData("tempSavedData")}}function lt(i){switch(i.type){case"dragstart":i.originalEvent.dataTransfer.effectAllowed="move";var e=(r=t(i.currentTarget).closest(".popupwindow")).data("settings"),o=this.getBoundingClientRect();r.data("adjust",{x:o.x-i.originalEvent.x,y:o.y-i.originalEvent.y}),r.css({opacity:e.dragOpacity});break;case"drag":e=(r=t(i.currentTarget).closest(".popupwindow")).data("settings");var n=r.data("adjust"),a={top:i.originalEvent.y+n.y,left:i.originalEvent.x+n.x};if(i.originalEvent.x&&i.originalEvent.y){var s=R(r),p=t(window),d=a.top<0||a.left<0||a.top>p.height()-s.height||a.left>p.width()-s.width;r.css(t.extend(a,{visibility:d?"hidden":"visible"})),r.data("coords",a)}break;case"dragend":var r;i.preventDefault(),i.stopPropagation(),e=(r=t(i.currentTarget).closest(".popupwindow")).data("settings"),n=r.data("adjust"),a=r.data("coords"),e.keepInViewport&&(s=R(r),p=t(window),a.top<0&&(a.top=0),a.left<0&&(a.left=0),a.top>p.height()-s.height&&(a.top=p.height()-s.height),a.left>p.width()-s.width&&(a.left=p.width()-s.width)),r.css(t.extend(a,{opacity:1,visibility:"visible"})),L(r,a),e.mouseMoveEvents&&Z(r,"move")}return!0}function wt(){t(this).parent().attr("draggable","true")}t.PopupWindowSetup=function(i){t.extend(!0,o,i)},t.PopupWindowMinimizedArea=function(e){if(e===i)return t.extend({},P);e.position&&(P.position=(0<=e.position.toLowerCase().indexOf("b")?"bottom":"top")+" "+(0<=e.position.toLowerCase().indexOf("l")?"left":"right")),e.direction&&(P.direction=0<=e.direction.toLowerCase().indexOf("h")?"horizontal":"vertical"),$()},t.fn.PopupWindow=function(e,o){if("string"!=typeof e)return this.each((function(){I(t(this),e)}));switch(e.toLowerCase()){case"init":return this.each((function(){I(t(this),o)}));case"open":return this.each((function(){C(t(this).closest(".popupwindow"))}));case"close":return this.each((function(){H(t(this).closest(".popupwindow"))}));case"maximize":return this.each((function(){O(t(this).closest(".popupwindow"))}));case"unmaximize":return this.each((function(){S(t(this).closest(".popupwindow"))}));case"collapse":return this.each((function(){E(t(this).closest(".popupwindow"))}));case"uncollapse":return this.each((function(){D(t(this).closest(".popupwindow"))}));case"minimize":return this.each((function(){B(t(this).closest(".popupwindow"))}));case"unminimize":return this.each((function(){M(t(this).closest(".popupwindow"))}));case"getposition":return this[0]?j(t(this[0]).closest(".popupwindow")):i;case"setposition":return this.each((function(){A(t(this).closest(".popupwindow"),t.extend({},o,{check:!0,event:!0}))}));case"getsize":return this[0]?R(t(this[0]).closest(".popupwindow")):i;case"setsize":return this.each((function(){K(t(this).closest(".popupwindow"),t.extend({},o,{checkSize:!0,checkPosition:!0,event:!0}))}));case"getstate":return this[0]?function(t){return t.length?t.data("opened")?t.data("minimized")?"minimized":t.data("collapsed")?"collapsed":t.data("maximized")?"maximized":"normal":"closed":i}(t(this[0]).closest(".popupwindow")):i;case"setstate":return this.each((function(){!function(t,i){if(tt(t))switch(i.toLowerCase()){case"normal":t.data("opened")||C(t),t.data("minimized")&&M(t),t.data("collapsed")&&D(t),t.data("maximized")&&S(t);break;case"closed":H(t);break;case"maximized":O(t);break;case"unmaximized":S(t);break;case"collapsed":E(t);break;case"uncollapsed":D(t);break;case"minimized":B(t);break;case"unminimized":M(t)}}(t(this).closest(".popupwindow"),o)}));case"settitle":return this.each((function(){!function(t,i){tt(t)&&(t.data("settings").title=i,t.find(".popupwindow_titlebar_text").text(i))}(t(this).closest(".popupwindow"),o)}));case"statusbar":return this.each((function(){!function(t,i){tt(t)&&t.find(".popupwindow_statusbar_content").html(i)}(t(this).closest(".popupwindow"),o)}));case"destroy":return this.each((function(){!function(t){if(tt(t)){var i=t.data("originalTarget");i.appendTo(t.data("originalParent")),t.data("minimized")?t.remove():t.data("overlay").remove(),i.trigger("destroy.popupwindow")}}(t(this).closest(".popupwindow"))}))}},t((function(){e=t("<div>",{class:"popupwindow_container"}).css(n).appendTo("body"),$(),t(window).on("resize",(function(){t(document).find(".popupwindow").each((function(){var i=t(this);i.data("settings").keepInViewport&&Q(i)}))}))}))}(jQuery);