!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";function n(n, t, o, i){if(o&&o.call){var f=o;o=null}else f=r(n,o,"rangeFinder");"number"==typeof t&&(t=e.Pos(t,0));var l=r(n,o,"minFoldSize");function u(e){var r=f(n,t);if(!r||r.to.line-r.from.line<l)return null;if("fold"===i)return r;for(var o=n.findMarksAt(r.from),u=0; u<o.length; ++u)if(o[u].__isFold){if(!e)return null;r.cleared=!0,o[u].clear()}return r}var a=u(!0);if(r(n,o,"scanUp"))for(; !a&&t.line>n.firstLine();)t=e.Pos(t.line-1,0),a=u(!1);if(a&&!a.cleared&&"unfold"!==i){var c=function(e, n, t){var o=r(e,n,"widget");"function"==typeof o&&(o=o(t.from,t.to));if("string"==typeof o){var i=document.createTextNode(o);(o=document.createElement("span")).appendChild(i),o.className="CodeMirror-foldmarker"}else o&&(o=o.cloneNode(!0));return o}(n,o,a);e.on(c,"mousedown",(function(n){d.clear(),e.e_preventDefault(n)}));var d=n.markText(a.from,a.to,{replacedWith:c,clearOnEnter:r(n,o,"clearOnEnter"),__isFold:!0});d.on("clear",(function(t, r){e.signal(n,"unfold",n,t,r)})),e.signal(n,"fold",n,a.from,a.to)}}e.newFoldFunction=function(e, t){return function(r, o){n(r,o,{rangeFinder:e,widget:t})}},e.defineExtension("foldCode",(function(e, t, r){n(this,e,t,r)})),e.defineExtension("isFolded",(function(e){for(var n=this.findMarksAt(e),t=0; t<n.length; ++t)if(n[t].__isFold)return!0})),e.commands.toggleFold=function(e){e.foldCode(e.getCursor())},e.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},e.commands.unfold=function(e){e.foldCode(e.getCursor(),{scanUp:!1},"unfold")},e.commands.foldAll=function(n){n.operation((function(){for(var t=n.firstLine(),r=n.lastLine(); t<=r; t++)n.foldCode(e.Pos(t,0),{scanUp:!1},"fold")}))},e.commands.unfoldAll=function(n){n.operation((function(){for(var t=n.firstLine(),r=n.lastLine(); t<=r; t++)n.foldCode(e.Pos(t,0),{scanUp:!1},"unfold")}))},e.registerHelper("fold","combine",(function(){var e=Array.prototype.slice.call(arguments,0);return function(n, t){for(var r=0; r<e.length; ++r){var o=e[r](n,t);if(o)return o}}})),e.registerHelper("fold","auto",(function(e, n){for(var t=e.getHelpers(n,"fold"),r=0; r<t.length; r++){var o=t[r](e,n);if(o)return o}}));var t={rangeFinder:e.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1,clearOnEnter:!0};function r(e, n, r){if(n&&void 0!==n[r])return n[r];var o=e.options.foldOptions;return o&&void 0!==o[r]?o[r]:t[r]}e.defineOption("foldOptions",null),e.defineExtension("foldOption",(function(e, n){return r(this,e,n)}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.registerHelper("fold","brace",(function(n, t){var r,o=t.line,i=n.getLine(o);function f(f){for(var l=t.ch,u=0;;){var a=l<=0?-1:i.lastIndexOf(f,l-1);if(-1!=a){if(1==u&&a<t.ch)break;if(r=n.getTokenTypeAt(e.Pos(o,a+1)),!/^(comment|string)/.test(r))return a+1;l=a-1}else{if(1==u)break;u=1,l=i.length}}}var l,u,a,c=f("{"),d=f("[");if(null!=c&&(null==d||d>c))a=c,l="{",u="}";else{if(null==d)return;a=d,l="[",u="]"}var s,m,g=1,p=n.lastLine();e:for(var v=o; v<=p; ++v)for(var h=n.getLine(v),F=v==o?a:0;;){var b=h.indexOf(l,F),x=h.indexOf(u,F);if(b<0&&(b=h.length),x<0&&(x=h.length),(F=Math.min(b,x))==h.length)break;if(n.getTokenTypeAt(e.Pos(v,F+1))==r)if(F==b)++g;else if(!--g){s=v,m=F;break e}++F}if(null!=s&&o!=s)return{from:e.Pos(o,a),to:e.Pos(s,m)}})),e.registerHelper("fold","import",(function(n, t){function r(t){if(t<n.firstLine()||t>n.lastLine())return null;var r=n.getTokenAt(e.Pos(t,1));if(/\S/.test(r.string)||(r=n.getTokenAt(e.Pos(t,r.end+1))),"keyword"!=r.type||"import"!=r.string)return null;for(var o=t,i=Math.min(n.lastLine(),t+10); o<=i; ++o){var f=n.getLine(o).indexOf(";");if(-1!=f)return{startCh:r.end,end:e.Pos(o,f)}}}var o,i=t.line,f=r(i);if(!f||r(i-1)||(o=r(i-2))&&o.end.line==i-1)return null;for(var l=f.end;;){var u=r(l.line+1);if(null==u)break;l=u.end}return{from:n.clipPos(e.Pos(i,f.startCh+1)),to:l}})),e.registerHelper("fold","include",(function(n, t){function r(t){if(t<n.firstLine()||t>n.lastLine())return null;var r=n.getTokenAt(e.Pos(t,1));return/\S/.test(r.string)||(r=n.getTokenAt(e.Pos(t,r.end+1))),"meta"==r.type&&"#include"==r.string.slice(0,8)?r.start+8:void 0}var o=t.line,i=r(o);if(null==i||null!=r(o-1))return null;for(var f=o;;){if(null==r(f+1))break;++f}return{from:e.Pos(o,i+1),to:n.clipPos(e.Pos(f))}}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.registerGlobalHelper("fold","comment",(function(e){return e.blockCommentStart&&e.blockCommentEnd}),(function(n, t){var r=n.getModeAt(t),o=r.blockCommentStart,i=r.blockCommentEnd;if(o&&i){for(var f,l=t.line,u=n.getLine(l),a=t.ch,c=0;;){var d=a<=0?-1:u.lastIndexOf(o,a-1);if(-1!=d){if(1==c&&d<t.ch)return;if(/comment/.test(n.getTokenTypeAt(e.Pos(l,d+1)))&&(0==d||u.slice(d-i.length,d)==i||!/comment/.test(n.getTokenTypeAt(e.Pos(l,d))))){f=d+o.length;break}a=d-1}else{if(1==c)return;c=1,a=u.length}}var s,m,g=1,p=n.lastLine();e:for(var v=l; v<=p; ++v)for(var h=n.getLine(v),F=v==l?f:0;;){var b=h.indexOf(o,F),x=h.indexOf(i,F);if(b<0&&(b=h.length),x<0&&(x=h.length),(F=Math.min(b,x))==h.length)break;if(F==b)++g;else if(!--g){s=v,m=F;break e}++F}if(null!=s&&(l!=s||m!=f))return{from:e.Pos(l,f),to:e.Pos(s,m)}}}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../codemirror","./foldcode"],e):e(CodeMirror)}((function(e){"use strict";e.defineOption("foldGutter",!1,(function(n, r, o){o&&o!=e.Init&&(n.clearGutter(n.state.foldGutter.options.gutter),n.state.foldGutter=null,n.off("gutterClick",u),n.off("changes",a),n.off("viewportChange",c),n.off("fold",d),n.off("unfold",d),n.off("swapDoc",a)),r&&(n.state.foldGutter=new t(function(e){!0===e&&(e={});null==e.gutter&&(e.gutter="CodeMirror-foldgutter");null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open");null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded");return e}(r)),l(n),n.on("gutterClick",u),n.on("changes",a),n.on("viewportChange",c),n.on("fold",d),n.on("unfold",d),n.on("swapDoc",a))}));var n=e.Pos;function t(e){this.options=e,this.from=this.to=0}function r(e, t){for(var r=e.findMarks(n(t,0),n(t+1,0)),o=0; o<r.length; ++o)if(r[o].__isFold){var i=r[o].find(-1);if(i&&i.line===t)return r[o]}}function o(e){if("string"==typeof e){var n=document.createElement("div");return n.className=e+" CodeMirror-guttermarker-subtle",n}return e.cloneNode(!0)}function i(e, t, i){var l=e.state.foldGutter.options,u=t-1,a=e.foldOption(l,"minFoldSize"),c=e.foldOption(l,"rangeFinder"),d="string"==typeof l.indicatorFolded&&f(l.indicatorFolded),s="string"==typeof l.indicatorOpen&&f(l.indicatorOpen);e.eachLine(t,i,(function(t){++u;var i=null,f=t.gutterMarkers;if(f&&(f=f[l.gutter]),r(e,u)){if(d&&f&&d.test(f.className))return;i=o(l.indicatorFolded)}else{var m=n(u,0),g=c&&c(e,m);if(g&&g.to.line-g.from.line>=a){if(s&&f&&s.test(f.className))return;i=o(l.indicatorOpen)}}(i||f)&&e.setGutterMarker(t,l.gutter,i)}))}function f(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function l(e){var n=e.getViewport(),t=e.state.foldGutter;t&&(e.operation((function(){i(e,n.from,n.to)})),t.from=n.from,t.to=n.to)}function u(e, t, o){var i=e.state.foldGutter;if(i){var f=i.options;if(o==f.gutter){var l=r(e,t);l?l.clear():e.foldCode(n(t,0),f)}}}function a(e){var n=e.state.foldGutter;if(n){var t=n.options;n.from=n.to=0,clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout((function(){l(e)}),t.foldOnChangeTimeSpan||600)}}function c(e){var n=e.state.foldGutter;if(n){var t=n.options;clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout((function(){var t=e.getViewport();n.from==n.to||t.from-n.to>20||n.from-t.to>20?l(e):e.operation((function(){t.from<n.from&&(i(e,t.from,n.from),n.from=t.from),t.to>n.to&&(i(e,n.to,t.to),n.to=t.to)}))}),t.updateViewportTimeSpan||400)}}function d(e, n){var t=e.state.foldGutter;if(t){var r=n.line;r>=t.from&&r<t.to&&i(e,r,r+1)}}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";function n(n, t){var r=n.getLine(t),o=r.search(/\S/);return-1==o||/\bcomment\b/.test(n.getTokenTypeAt(e.Pos(t,o+1)))?-1:e.countColumn(r,null,n.getOption("tabSize"))}e.registerHelper("fold","indent",(function(t, r){var o=n(t,r.line);if(!(o<0)){for(var i=null,f=r.line+1,l=t.lastLine(); f<=l; ++f){var u=n(t,f);if(-1==u);else{if(!(u>o))break;i=f}}return i?{from:e.Pos(r.line,t.getLine(r.line).length),to:e.Pos(i,t.getLine(i).length)}:void 0}}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.registerHelper("fold","markdown",(function(n, t){function r(t){var r=n.getTokenTypeAt(e.Pos(t,0));return r&&/\bheader\b/.test(r)}function o(e, n, t){var o=n&&n.match(/^#+/);return o&&r(e)?o[0].length:(o=t&&t.match(/^[=\-]+\s*$/))&&r(e+1)?"="==t[0]?1:2:100}var i=n.getLine(t.line),f=n.getLine(t.line+1),l=o(t.line,i,f);if(100!==l){for(var u=n.lastLine(),a=t.line,c=n.getLine(a+2); a<u&&!(o(a+1,f,c)<=l);)++a,f=c,c=n.getLine(a+2);return{from:e.Pos(t.line,i.length),to:e.Pos(a,n.getLine(a).length)}}}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";var n=e.Pos;function t(e, n){return e.line-n.line||e.ch-n.ch}var r="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=new RegExp("<(/?)(["+r+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function i(e, n, t, r){this.line=n,this.ch=t,this.cm=e,this.text=e.getLine(n),this.min=r?Math.max(r.from,e.firstLine()):e.firstLine(),this.max=r?Math.min(r.to-1,e.lastLine()):e.lastLine()}function f(e, t){var r=e.cm.getTokenTypeAt(n(e.line,t));return r&&/\btag\b/.test(r)}function l(e){if(!(e.line>=e.max))return e.ch=0,e.text=e.cm.getLine(++e.line),!0}function u(e){if(!(e.line<=e.min))return e.text=e.cm.getLine(--e.line),e.ch=e.text.length,!0}function a(e){for(;;){var n=e.text.indexOf(">",e.ch);if(-1==n){if(l(e))continue;return}if(f(e,n+1)){var t=e.text.lastIndexOf("/",n),r=t>-1&&!/\S/.test(e.text.slice(t+1,n));return e.ch=n+1,r?"selfClose":"regular"}e.ch=n+1}}function c(e){for(;;){var n=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==n){if(u(e))continue;return}if(f(e,n+1)){o.lastIndex=n,e.ch=n;var t=o.exec(e.text);if(t&&t.index==n)return t}else e.ch=n}}function d(e){for(;;){o.lastIndex=e.ch;var n=o.exec(e.text);if(!n){if(l(e))continue;return}if(f(e,n.index+1))return e.ch=n.index+n[0].length,n;e.ch=n.index+1}}function s(e){for(;;){var n=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==n){if(u(e))continue;return}if(f(e,n+1)){var t=e.text.lastIndexOf("/",n),r=t>-1&&!/\S/.test(e.text.slice(t+1,n));return e.ch=n+1,r?"selfClose":"regular"}e.ch=n}}function m(e, t){for(var r=[];;){var o,i=d(e),f=e.line,l=e.ch-(i?i[0].length:0);if(!i||!(o=a(e)))return;if("selfClose"!=o)if(i[1]){for(var u=r.length-1; u>=0; --u)if(r[u]==i[2]){r.length=u;break}if(u<0&&(!t||t==i[2]))return{tag:i[2],from:n(f,l),to:n(e.line,e.ch)}}else r.push(i[2])}}function g(e, t){for(var r=[];;){var o=s(e);if(!o)return;if("selfClose"!=o){var i=e.line,f=e.ch,l=c(e);if(!l)return;if(l[1])r.push(l[2]);else{for(var u=r.length-1; u>=0; --u)if(r[u]==l[2]){r.length=u;break}if(u<0&&(!t||t==l[2]))return{tag:l[2],from:n(e.line,e.ch),to:n(i,f)}}}else c(e)}}e.registerHelper("fold","xml",(function(e, r){for(var o=new i(e,r.line,0);;){var f=d(o);if(!f||o.line!=r.line)return;var l=a(o);if(!l)return;if(!f[1]&&"selfClose"!=l){var u=n(o.line,o.ch),c=m(o,f[2]);return c&&t(c.from,u)>0?{from:u,to:c.from}:null}}})),e.findMatchingTag=function(e, r, o){var f=new i(e,r.line,r.ch,o);if(-1!=f.text.indexOf(">")||-1!=f.text.indexOf("<")){var l=a(f),u=l&&n(f.line,f.ch),d=l&&c(f);if(l&&d&&!(t(f,r)>0)){var s={from:n(f.line,f.ch),to:u,tag:d[2]};return"selfClose"==l?{open:s,close:null,at:"open"}:d[1]?{open:g(f,d[2]),close:s,at:"close"}:{open:s,close:m(f=new i(e,u.line,u.ch,o),d[2]),at:"open"}}}},e.findEnclosingTag=function(e, n, t, r){for(var o=new i(e,n.line,n.ch,t);;){var f=g(o,r);if(!f)break;var l=m(new i(e,n.line,n.ch,t),f.tag);if(l)return{open:f,close:l}}},e.scanForClosingTag=function(e, n, t, r){return m(new i(e,n.line,n.ch,r?{from:0,to:r}:null),t)}}));