!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){var t={pairs:"()[]{}''\"\"",closeBefore:")]}'\":;>",triples:"",explode:"[]{}"},n=e.Pos;function r(e, n){return"pairs"==n&&"string"==typeof e?e:"object"==typeof e&&null!=e[n]?e[n]:t[n]}e.defineOption("autoCloseBrackets",!1,(function(t, n, o){o&&o!=e.Init&&(t.removeKeyMap(i),t.state.closeBrackets=null),n&&(a(r(n,"pairs")),t.state.closeBrackets=n,t.addKeyMap(i))}));var i={Backspace:function(t){var i=c(t);if(!i||t.getOption("disableInput"))return e.Pass;for(var a=r(i,"pairs"),o=t.listSelections(),s=0; s<o.length; s++){if(!o[s].empty())return e.Pass;var l=h(t,o[s].head);if(!l||a.indexOf(l)%2!=0)return e.Pass}for(s=o.length-1; s>=0; s--){var f=o[s].head;t.replaceRange("",n(f.line,f.ch-1),n(f.line,f.ch+1),"+delete")}},Enter:function(t){var n=c(t),i=n&&r(n,"explode");if(!i||t.getOption("disableInput"))return e.Pass;for(var a=t.listSelections(),o=0; o<a.length; o++){if(!a[o].empty())return e.Pass;var l=h(t,a[o].head);if(!l||i.indexOf(l)%2!=0)return e.Pass}t.operation((function(){var e=t.lineSeparator()||"\n";t.replaceSelection(e+e,null),s(t,-1),a=t.listSelections();for(var n=0; n<a.length; n++){var r=a[n].head.line;t.indentLine(r,null,!0),t.indentLine(r+1,null,!0)}}))}};function a(e){for(var t=0; t<e.length; t++){var n=e.charAt(t),r="'"+n+"'";i[r]||(i[r]=o(n))}}function o(t){return function(i){return function(t, i){var a=c(t);if(!a||t.getOption("disableInput"))return e.Pass;var o=r(a,"pairs"),h=o.indexOf(i);if(-1==h)return e.Pass;for(var u,d=r(a,"closeBefore"),g=r(a,"triples"),p=o.charAt(h+1)==i,m=t.listSelections(),v=h%2==0,k=0; k<m.length; k++){var y,b=m[k],x=b.head,B=t.getRange(x,n(x.line,x.ch+1));if(v&&!b.empty())y="surround";else if(!p&&v||B!=i)if(p&&x.ch>1&&g.indexOf(i)>=0&&t.getRange(n(x.line,x.ch-2),x)==i+i){if(x.ch>2&&/\bstring/.test(t.getTokenTypeAt(n(x.line,x.ch-2))))return e.Pass;y="addFour"}else if(p){var A=0==x.ch?" ":t.getRange(n(x.line,x.ch-1),x);if(e.isWordChar(B)||A==i||e.isWordChar(A))return e.Pass;y="both"}else{if(!v||!(0===B.length||/\s/.test(B)||d.indexOf(B)>-1))return e.Pass;y="both"}else y=p&&f(t,x)?"both":g.indexOf(i)>=0&&t.getRange(x,n(x.line,x.ch+3))==i+i+i?"skipThree":"skip";if(u){if(u!=y)return e.Pass}else u=y}var S=h%2?o.charAt(h-1):i,L=h%2?i:o.charAt(h+1);t.operation((function(){if("skip"==u)s(t,1);else if("skipThree"==u)s(t,3);else if("surround"==u){for(var e=t.getSelections(),n=0; n<e.length; n++)e[n]=S+e[n]+L;t.replaceSelections(e,"around"),e=t.listSelections().slice();for(n=0; n<e.length; n++)e[n]=l(e[n]);t.setSelections(e)}else"both"==u?(t.replaceSelection(S+L,null),t.triggerElectric(S+L),s(t,-1)):"addFour"==u&&(t.replaceSelection(S+S+S+S,"before"),s(t,1))}))}(i,t)}}function c(e){var t=e.state.closeBrackets;return!t||t.override?t:e.getModeAt(e.getCursor()).closeBrackets||t}function s(e, t){for(var n=[],r=e.listSelections(),i=0,a=0; a<r.length; a++){var o=r[a];o.head==e.getCursor()&&(i=a);var c=o.head.ch||t>0?{line:o.head.line,ch:o.head.ch+t}:{line:o.head.line-1};n.push({anchor:c,head:c})}e.setSelections(n,i)}function l(t){var r=e.cmpPos(t.anchor,t.head)>0;return{anchor:new n(t.anchor.line,t.anchor.ch+(r?-1:1)),head:new n(t.head.line,t.head.ch+(r?1:-1))}}function h(e, t){var r=e.getRange(n(t.line,t.ch-1),n(t.line,t.ch+1));return 2==r.length?r:null}function f(e, t){var r=e.getTokenAt(n(t.line,t.ch+1));return/\bstring/.test(r.type)&&r.start==t.ch&&(0==t.ch||!/\bstring/.test(e.getTokenTypeAt(t)))}a(t.pairs+"`")})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),n=e.Pos,r={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<","<":">>",">":"<<"};function i(e){return e&&e.bracketRegex||/[(){}[\]]/}function a(e, t, a){var c=e.getLineHandle(t.line),s=t.ch-1,l=a&&a.afterCursor;null==l&&(l=/(^| )cm-fat-cursor($| )/.test(e.getWrapperElement().className));var h=i(a),f=!l&&s>=0&&h.test(c.text.charAt(s))&&r[c.text.charAt(s)]||h.test(c.text.charAt(s+1))&&r[c.text.charAt(++s)];if(!f)return null;var u=">"==f.charAt(1)?1:-1;if(a&&a.strict&&u>0!=(s==t.ch))return null;var d=e.getTokenTypeAt(n(t.line,s+1)),g=o(e,n(t.line,s+(u>0?1:0)),u,d,a);return null==g?null:{from:n(t.line,s),to:g&&g.pos,match:g&&g.ch==f.charAt(0),forward:u>0}}function o(e, t, a, o, c){for(var s=c&&c.maxScanLineLength||1e4,l=c&&c.maxScanLines||1e3,h=[],f=i(c),u=a>0?Math.min(t.line+l,e.lastLine()+1):Math.max(e.firstLine()-1,t.line-l),d=t.line; d!=u; d+=a){var g=e.getLine(d);if(g){var p=a>0?0:g.length-1,m=a>0?g.length:-1;if(!(g.length>s))for(d==t.line&&(p=t.ch-(a<0?1:0)); p!=m; p+=a){var v=g.charAt(p);if(f.test(v)&&(void 0===o||(e.getTokenTypeAt(n(d,p+1))||"")==(o||""))){var k=r[v];if(k&&">"==k.charAt(1)==a>0)h.push(v);else{if(!h.length)return{pos:n(d,p),ch:v};h.pop()}}}}}return d-a!=(a>0?e.lastLine():e.firstLine())&&null}function c(e, r, i){for(var o=e.state.matchBrackets.maxHighlightLineLength||1e3,c=i&&i.highlightNonMatching,s=[],l=e.listSelections(),h=0; h<l.length; h++){var f=l[h].empty()&&a(e,l[h].head,i);if(f&&(f.match||!1!==c)&&e.getLine(f.from.line).length<=o){var u=f.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";s.push(e.markText(f.from,n(f.from.line,f.from.ch+1),{className:u})),f.to&&e.getLine(f.to.line).length<=o&&s.push(e.markText(f.to,n(f.to.line,f.to.ch+1),{className:u}))}}if(s.length){t&&e.state.focused&&e.focus();var d=function(){e.operation((function(){for(var e=0; e<s.length; e++)s[e].clear()}))};if(!r)return d;setTimeout(d,800)}}function s(e){e.operation((function(){e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null),e.state.matchBrackets.currentlyHighlighted=c(e,!1,e.state.matchBrackets)}))}function l(e){e.state.matchBrackets&&e.state.matchBrackets.currentlyHighlighted&&(e.state.matchBrackets.currentlyHighlighted(),e.state.matchBrackets.currentlyHighlighted=null)}e.defineOption("matchBrackets",!1,(function(t, n, r){r&&r!=e.Init&&(t.off("cursorActivity",s),t.off("focus",s),t.off("blur",l),l(t)),n&&(t.state.matchBrackets="object"==typeof n?n:{},t.on("cursorActivity",s),t.on("focus",s),t.on("blur",l))})),e.defineExtension("matchBrackets",(function(){c(this,!0)})),e.defineExtension("findMatchingBracket",(function(e, t, n){return(n||"boolean"==typeof t)&&(n?(n.strict=t,t=n):t=t?{strict:!0}:null),a(this,e,t)})),e.defineExtension("scanForBracket",(function(e, t, n, r){return o(this,e,t,n,r)}))}));
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../codemirror","../fold/xml-fold"],e):e(CodeMirror)}((function(e){e.defineOption("autoCloseTags",!1,(function(a, s, l){if(l!=e.Init&&l&&a.removeKeyMap("autoCloseTags"),s){var c={name:"autoCloseTags"};"object"==typeof s&&!1===s.whenClosing||(c["'/'"]=function(t){return function(t){return t.getOption("disableInput")?e.Pass:o(t,!0)}(t)}),"object"==typeof s&&!1===s.whenOpening||(c["'>'"]=function(o){return function(o){if(o.getOption("disableInput"))return e.Pass;for(var a=o.listSelections(),s=[],l=o.getOption("autoCloseTags"),c=0; c<a.length; c++){if(!a[c].empty())return e.Pass;var f=a[c].head,d=o.getTokenAt(f),g=e.innerMode(o.getMode(),d.state),u=g.state,m=g.mode.xmlCurrentTag&&g.mode.xmlCurrentTag(u),h=m&&m.name;if(!h)return e.Pass;var p="html"==g.mode.configuration,v="object"==typeof l&&l.dontCloseTags||p&&t,x="object"==typeof l&&l.indentTags||p&&n;d.end>f.ch&&(h=h.slice(0,h.length-d.end+f.ch));var b=h.toLowerCase();if(!h||"string"==d.type&&(d.end!=f.ch||!/[\"\']/.test(d.string.charAt(d.string.length-1))||1==d.string.length)||"tag"==d.type&&m.close||d.string.indexOf("/")==f.ch-d.start-1||v&&r(v,b)>-1||i(o,g.mode.xmlCurrentContext&&g.mode.xmlCurrentContext(u)||[],h,f,!0))return e.Pass;var y="object"==typeof l&&l.emptyTags;if(y&&r(y,h)>-1)s[c]={text:"/>",newPos:e.Pos(f.line,f.ch+2)};else{var C=x&&r(x,b)>-1;s[c]={indent:C,text:">"+(C?"\n\n":"")+"</"+h+">",newPos:C?e.Pos(f.line+1,0):e.Pos(f.line,f.ch+1)}}}var T="object"==typeof l&&l.dontIndentOnAutoClose;for(c=a.length-1; c>=0; c--){var M=s[c];o.replaceRange(M.text,a[c].head,a[c].anchor,"+insert");var O=o.listSelections().slice(0);O[c]={head:M.newPos,anchor:M.newPos},o.setSelections(O),!T&&M.indent&&(o.indentLine(M.newPos.line,null,!0),o.indentLine(M.newPos.line+1,null,!0))}}(o)}),a.addKeyMap(c)}}));var t=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],n=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function o(t, n){for(var o=t.listSelections(),r=[],a=n?"/":"</",s=t.getOption("autoCloseTags"),l="object"==typeof s&&s.dontIndentOnSlash,c=0; c<o.length; c++){if(!o[c].empty())return e.Pass;var f=o[c].head,d=t.getTokenAt(f),g=e.innerMode(t.getMode(),d.state),u=g.state;if(n&&("string"==d.type||"<"!=d.string.charAt(0)||d.start!=f.ch-1))return e.Pass;var m,h="xml"!=g.mode.name&&"htmlmixed"==t.getMode().name;if(h&&"javascript"==g.mode.name)m=a+"script";else if(h&&"css"==g.mode.name)m=a+"style";else{var p=g.mode.xmlCurrentContext&&g.mode.xmlCurrentContext(u),v=p.length?p[p.length-1]:"";if(!p||p.length&&i(t,p,v,f))return e.Pass;m=a+v}">"!=t.getLine(f.line).charAt(d.end)&&(m+=">"),r[c]=m}if(t.replaceSelections(r),o=t.listSelections(),!l)for(c=0; c<o.length; c++)(c==o.length-1||o[c].head.line<o[c+1].head.line)&&t.indentLine(o[c].head.line)}function r(e, t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length; n<o; ++n)if(e[n]==t)return n;return-1}function i(t, n, o, r, i){if(!e.scanForClosingTag)return!1;var a=Math.min(t.lastLine()+1,r.line+500),s=e.scanForClosingTag(t,r,null,a);if(!s||s.tag!=o)return!1;for(var l=i?1:0,c=n.length-1; c>=0&&n[c]==o; c--)++l;r=s.to;for(c=1; c<l; c++){var f=e.scanForClosingTag(t,r,null,a);if(!f||f.tag!=o)return!1;r=f.to}return!0}e.commands.closeTag=function(e){return o(e)}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){"use strict";var t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,o=/[*+-]\s/;function r(e, n){var o=n.line,r=0,i=0,a=t.exec(e.getLine(o)),s=a[1];do{var l=o+(r+=1),c=e.getLine(l),f=t.exec(c);if(f){var d=f[1],g=parseInt(a[3],10)+r-i,u=parseInt(f[3],10),m=u;if(s!==d||isNaN(u)){if(s.length>d.length)return;if(s.length<d.length&&1===r)return;i+=1}else g===u&&(m=u+1),g>u&&(m=g+1),e.replaceRange(c.replace(t,d+m+f[4]+f[5]),{line:l,ch:0},{line:l,ch:c.length})}}while(f)}e.commands.newlineAndIndentContinueMarkdownList=function(i){if(i.getOption("disableInput"))return e.Pass;for(var a=i.listSelections(),s=[],l=0; l<a.length; l++){var c=a[l].head,f=i.getStateAfter(c.line),d=e.innerMode(i.getMode(),f);if("markdown"!==d.mode.name)return void i.execCommand("newlineAndIndent");var g=!1!==(f=d.state).list,u=0!==f.quote,m=i.getLine(c.line),h=t.exec(m),p=/^\s*$/.test(m.slice(0,c.ch));if(!a[l].empty()||!g&&!u||!h||p)return void i.execCommand("newlineAndIndent");if(n.test(m)){var v=u&&/>\s*$/.test(m),x=!/>\s*$/.test(m);(v||x)&&i.replaceRange("",{line:c.line,ch:0},{line:c.line,ch:c.ch+1}),s[l]="\n"}else{var b=h[1],y=h[5],C=!(o.test(h[2])||h[2].indexOf(">")>=0),T=C?parseInt(h[3],10)+1+h[4]:h[2].replace("x"," ");s[l]="\n"+b+T+y,C&&r(i,c)}}i.replaceSelections(s)}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../codemirror","../fold/xml-fold"],e):e(CodeMirror)}((function(e){"use strict";function t(e){e.state.tagHit&&e.state.tagHit.clear(),e.state.tagOther&&e.state.tagOther.clear(),e.state.tagHit=e.state.tagOther=null}function n(n){n.state.failedTagMatch=!1,n.operation((function(){if(t(n),!n.somethingSelected()){var o=n.getCursor(),r=n.getViewport();r.from=Math.min(r.from,o.line),r.to=Math.max(o.line+1,r.to);var i=e.findMatchingTag(n,o,r);if(i){if(n.state.matchBothTags){var a="open"==i.at?i.open:i.close;a&&(n.state.tagHit=n.markText(a.from,a.to,{className:"CodeMirror-matchingtag"}))}var s="close"==i.at?i.open:i.close;s?n.state.tagOther=n.markText(s.from,s.to,{className:"CodeMirror-matchingtag"}):n.state.failedTagMatch=!0}}}))}function o(e){e.state.failedTagMatch&&n(e)}e.defineOption("matchTags",!1,(function(r, i, a){a&&a!=e.Init&&(r.off("cursorActivity",n),r.off("viewportChange",o),t(r)),i&&(r.state.matchBothTags="object"==typeof i&&i.bothTags,r.on("cursorActivity",n),r.on("viewportChange",o),n(r))})),e.commands.toMatchingTag=function(t){var n=e.findMatchingTag(t,t.getCursor());if(n){var o="close"==n.at?n.open:n.close;o&&t.extendSelection(o.to,o.from)}}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../codemirror")):"function"==typeof define&&define.amd?define(["../codemirror"],e):e(CodeMirror)}((function(e){e.defineOption("showTrailingSpace",!1,(function(t, n, o){o==e.Init&&(o=!1),o&&!n?t.removeOverlay("trailingspace"):!o&&n&&t.addOverlay({token:function(e){for(var t=e.string.length,n=t; n&&/\s/.test(e.string.charAt(n-1)); --n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})}))}));