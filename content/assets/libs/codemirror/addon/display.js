!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";function t(t,r){clearTimeout(r.timeout),e.off(window,"mouseup",r.hurry),e.off(window,"keyup",r.hurry)}e.defineOption("autoRefresh",!1,(function(r,o){r.state.autoRefresh&&(t(r,r.state.autoRefresh),r.state.autoRefresh=null),o&&0==r.display.wrapper.offsetHeight&&function(r,o){function i(){r.display.wrapper.offsetHeight?(t(r,o),r.display.lastWrapHeight!=r.display.wrapper.clientHeight&&r.refresh()):o.timeout=setTimeout(i,o.delay)}o.timeout=setTimeout(i,o.delay),o.hurry=function(){clearTimeout(o.timeout),o.timeout=setTimeout(i,50)},e.on(window,"mouseup",o.hurry),e.on(window,"keyup",o.hurry)}(r,r.state.autoRefresh={delay:o.delay||250})}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";e.defineOption("fullScreen",!1,(function(t,r,o){o==e.Init&&(o=!1),!o!=!r&&(r?function(e){var t=e.getWrapperElement();e.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",e.refresh()}(t):function(e){var t=e.getWrapperElement();t.className=t.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var r=e.state.fullScreenRestore;t.style.width=r.width,t.style.height=r.height,window.scrollTo(r.scrollLeft,r.scrollTop),e.refresh()}(t))}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){function t(e,t,r,o){this.cm=e,this.node=t,this.options=r,this.height=o,this.cleared=!1}function r(e,t){for(var r=t.nextSibling;r;r=r.nextSibling)if(r==e.getWrapperElement())return!0;return!1}e.defineExtension("addPanel",(function(e,o){o=o||{},this.state.panels||function(e){var t=e.getWrapperElement(),r=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o=parseInt(r.height),i=e.state.panels={setHeight:t.style.height,panels:[],wrapper:document.createElement("div")},n=e.hasFocus(),l=e.getScrollInfo();t.parentNode.insertBefore(i.wrapper,t),i.wrapper.appendChild(t),e.scrollTo(l.left,l.top),n&&e.focus();e._setSize=e.setSize,null!=o&&(e.setSize=function(t,r){if(r||(r=i.wrapper.offsetHeight),i.setHeight=r,"number"!=typeof r){var n=/^(\d+\.?\d*)px$/.exec(r);n?r=Number(n[1]):(i.wrapper.style.height=r,r=i.wrapper.offsetHeight)}var l=r-i.panels.map((function(e){return e.node.getBoundingClientRect().height})).reduce((function(e,t){return e+t}),0);e._setSize(t,l),o=r})}(this);var i=this.state.panels,n=i.wrapper,l=this.getWrapperElement(),s=o.replace instanceof t&&!o.replace.cleared;o.after instanceof t&&!o.after.cleared?n.insertBefore(e,o.before.node.nextSibling):o.before instanceof t&&!o.before.cleared?n.insertBefore(e,o.before.node):s?(n.insertBefore(e,o.replace.node),o.replace.clear(!0)):"bottom"==o.position?n.appendChild(e):"before-bottom"==o.position?n.insertBefore(e,l.nextSibling):"after-top"==o.position?n.insertBefore(e,l):n.insertBefore(e,n.firstChild);var a=o&&o.height||e.offsetHeight,c=new t(this,e,o,a);return i.panels.push(c),this.setSize(),o.stable&&r(this,e)&&this.scrollTo(null,this.getScrollInfo().top+a),c})),t.prototype.clear=function(e){if(!this.cleared){this.cleared=!0;var t=this.cm.state.panels;t.panels.splice(t.panels.indexOf(this),1),this.cm.setSize(),this.options.stable&&r(this.cm,this.node)&&this.cm.scrollTo(null,this.cm.getScrollInfo().top-this.height),t.wrapper.removeChild(this.node),0!=t.panels.length||e||function(e){var t=e.state.panels;e.state.panels=null;var r=e.getWrapperElement(),o=e.hasFocus(),i=e.getScrollInfo();t.wrapper.parentNode.replaceChild(r,t.wrapper),e.scrollTo(i.left,i.top),o&&e.focus();r.style.height=t.setHeight,e.setSize=e._setSize,e.setSize()}(this.cm)}},t.prototype.changed=function(){this.height=this.node.getBoundingClientRect().height,this.cm.setSize()}})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function r(e){t(e);var r=e.state.placeholder=document.createElement("pre");r.style.cssText="height: 0; overflow: visible",r.style.direction=e.getOption("direction"),r.className="CodeMirror-placeholder CodeMirror-line-like";var o=e.getOption("placeholder");"string"==typeof o&&(o=document.createTextNode(o)),r.appendChild(o),e.display.lineSpace.insertBefore(r,e.display.lineSpace.firstChild)}function o(e){n(e)&&r(e)}function i(e){var o=e.getWrapperElement(),i=n(e);o.className=o.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?r(e):t(e)}function n(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",(function(n,l,s){var a=s&&s!=e.Init;if(l&&!a)n.on("blur",o),n.on("change",i),n.on("swapDoc",i),e.on(n.getInputField(),"compositionupdate",n.state.placeholderCompose=function(){!function(e){setTimeout((function(){var o=!1;if(1==e.lineCount()){var i=e.getInputField();o="TEXTAREA"==i.nodeName?!e.getLine(0).length:!/[^\u200b]/.test(i.querySelector(".CodeMirror-line").textContent)}o?r(e):t(e)}),20)}(n)}),i(n);else if(!l&&a){n.off("blur",o),n.off("change",i),n.off("swapDoc",i),e.off(n.getInputField(),"compositionupdate",n.state.placeholderCompose),t(n);var c=n.getWrapperElement();c.className=c.className.replace(" CodeMirror-empty","")}l&&!n.hasFocus()&&o(n)}))})),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";function t(t){t.state.rulerDiv.textContent="";var r=t.getOption("rulers"),o=t.defaultCharWidth(),i=t.charCoords(e.Pos(t.firstLine(),0),"div").left;t.state.rulerDiv.style.minHeight=t.display.scroller.offsetHeight+30+"px";for(var n=0;n<r.length;n++){var l=document.createElement("div");l.className="CodeMirror-ruler";var s,a=r[n];"number"==typeof a?s=a:(s=a.column,a.className&&(l.className+=" "+a.className),a.color&&(l.style.borderColor=a.color),a.lineStyle&&(l.style.borderLeftStyle=a.lineStyle),a.width&&(l.style.borderLeftWidth=a.width)),l.style.left=i+s*o+"px",t.state.rulerDiv.appendChild(l)}}e.defineOption("rulers",!1,(function(e,r){e.state.rulerDiv&&(e.state.rulerDiv.parentElement.removeChild(e.state.rulerDiv),e.state.rulerDiv=null,e.off("refresh",t)),r&&r.length&&(e.state.rulerDiv=e.display.lineSpace.parentElement.insertBefore(document.createElement("div"),e.display.lineSpace),e.state.rulerDiv.className="CodeMirror-rulers",t(e),e.on("refresh",t))}))}));